"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0};custom_plugins.PluginLoader.getInstance().addPlugin(function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.VERSION="1.0";var r=e;return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addListener",e).call(e,function(){$.getJSON("http://duelyst.r4nd0m.org/versions.json",function(e){var t=["SysHook","_BasePlugin"],n=window.custom_plugins.PluginLoader.getInstance().getPlugins(),o="<b>Currently loaded CPS Plugins:</b><hr/>",i=0,u={0:"green","-1":"red",1:"orange"};for(var a in n){var l=n[a],s=l.getName();t.indexOf(s)===-1&&(i=r.versionCompare(l.VERSION,e.plugins[s]),o+='<a style="font-weight:bold; color: '+(l.URL?"darkblue":"black")+'; cursor: pointer;" target="_blank" href="'+(l.URL||"javascript:;")+'">'+s+'</a>: <b style="color:'+u[i]+'">'+l.VERSION+"</b><br/>")}i=r.versionCompare(window.custom_plugins.CPS.VERSION,e.CPS),o+='<hr/><b><u>CPS Version:</u></b> <span style="color:'+u[i]+';">'+window.custom_plugins.CPS.VERSION+"</span>",0!==i&&(o+="<br/>There is a new CPS Version!"),$(document.createElement("div")).html(o).css({position:"absolute",top:"5px",right:"5px",pointerEvents:"auto",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"4px",padding:"10px",fontSize:"11px"}).appendTo($(".utility-top"))})},window.custom_plugins.eventHooks.c_APPLICATION_CREATED.AFTER_SHOW_MAIN_MENU),e}return _inherits(t,e),_createClass(t,[{key:"versionCompare",value:function(e,t,r){function n(e){return(o?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}var o=r&&r.lexicographical,i=r&&r.zeroExtend,u=e.split("."),a=t.split(".");if(!u.every(n)||!a.every(n))return NaN;if(i){for(;u.length<a.length;)u.push("0");for(;a.length<u.length;)a.push("0")}o||(u=u.map(Number),a=a.map(Number));for(var l=0;l<u.length;++l){if(a.length==l)return 1;if(u[l]!=a[l])return u[l]>a[l]?1:-1}return u.length!=a.length?-1:0}}]),t}(window.custom_plugins.Plugin));